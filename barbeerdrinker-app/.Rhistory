transactions
View(transactions)
transactions[i,1]$transaction_id
transactions[1,1]$transaction_id
transactions[2,1]$transaction_id
transactions[2000,1]$transaction_id
for (i in seq(1:nrow(transactions))) {
transactions[i,3] <- (bills %>% filter(transaction_id == transactions[i,1]$transaction_id))[1,2]$bar
}
View(transactions)
source('~/Documents/barbeerdrinker/generate_transactions.R')
add_column(transactions, bar_name = NA_character_)
for (i in seq(1:nrow(transactions))) {
transactions[i,3] <- (bills %>% filter(transaction_id == transactions[i,1]$transaction_id))[1,2]$bar
}
# rename columns to match barbeerdrinker AWS instance
colnames(transactions) <- c("transaction_id",
"bar_name",
"subtotal")
# generate random tip % between 10%-20%
tip <- tbl_df(runif(nrow(transactions), 10, 20))/100
# add tip column and calculate total using 7% sales tax
transactions <- transactions %>%
mutate(tip = tip$value) %>%
mutate(total = (subtotal + subtotal*tip) + (subtotal + subtotal*tip)*0.07)
View(transactions)
source('~/Documents/barbeerdrinker/generate_transactions.R')
View(transactions)
transactions %>% distinct(transaction_id)
source('~/Documents/barbeerdrinker/generate_transactions.R')
View(transactions)
source('~/Documents/barbeerdrinker/generate_transactions.R')
View(transactions)
source('~/Documents/barbeerdrinker/generate_transactions.R')
View(transactions)
transactions
rm(t)
rm(list=ls())
source('~/Documents/barbeerdrinker/gtransactions.R')
transactions
transactions
# generate those timestamps and add them to the database in-function
transactions <- tbl_df(genHours(transactions, bars_md) %>% arrange(transaction_time))
transactions
tbl_df(transactions)
library(tidyverse)
tbl_df(transactions)
frequents
frequents %>% distinct(bar)
t <- frequents %>% distinct(bar)
View(t)
source('~/Documents/barbeerdrinker/gen_tables/gen_transac.R')
rm(t)
source('~/Documents/barbeerdrinker/gen_tables/gen_transac.R')
bills
rm(list = ls())
source('~/Documents/barbeerdrinker/gen_tables/gen_transac.R')
(bills %>% filter(transaction_id == transactions[i,1]$transaction_id))[1,2]$bar
bills
bills %>% filter(transaction_id == transactions[i,1]$transaction_id)
bills
source('~/Documents/barbeerdrinker/gen_tables/gen_transac.R')
transactions[i,3] <- (bills %>% filter(transaction_id == transactions[i,1]$transaction_id))[1,2]$bar
bills
source('~/Documents/barbeerdrinker/gen_tables/gen_transac.R')
source('~/Documents/barbeerdrinker/gen_tables/gen_transac.R')
rm(list=ls())
t <- read_csv("~/Documents/hw6.csv")
library(tidyverse)
t <- read_csv("~/Documents/hw6.csv")
t
t
t <- read_csv("~/Documents/hw6.csv")
t
t(t)
tbl_df(t(t))
t <- tbl_df(t(t))
t
t$V1 <- t$V1/t$V1
t
t[4,1]
t[4,1] <- 0
t
t[5,1] <- 0
t
t <- read_csv("~/Documents/hw6.csv")
t <- read_csv("~/Documents/hw6.csv") %>% tbl_df(t(t))
t
t <- read_csv("~/Documents/hw6.csv")
t <- tbl_df(t(t))
t
t$V1 <- t$V1/t[1,1]
t$V1 <- t$V1/t[1,1]$value
t[1,1]
t$V1 <- t$V1/t[1,1]$V1
t
t(t)
t$V2 <- t$V2+0.625*t$V1
t
t(t)
t$V3 <- t$V3+t$V1
t
t(t)
t$V5 <- t$V5+1.625*t$V1
t(t)
?eval
eval("tb <- t")
?parse
eval(parse("tb <- t"))
t
eval(parse("tb <- t"))
eval(parse("tb = t"))
eval(parse(text = "tb <- t"))
bars <- get_tbl("select * from bars")
source('~/Documents/dbproj/barbeerdrinker-app/graphs.R')
source('~/Documents/dbproj/barbeerdrinker-app/graphs.R')
source("utilities.R")
shiny::runApp('Documents/dbproj/barbeerdrinker-app')
source('~/Documents/dbproj/barbeerdrinker-app/graphs.R')
getwd()
source("Documents/dbproj/barbeerdrinker-app/utilities.R")
getwd()
source('~/r/barbeerdrinker/barbeerdrinker-app/graphs.R')
getwd()
setwd("~/r/"
)
getwd()
shiny::runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
?icon
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
shiny::runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
?confirmSweetAlert
if (!require(formattable))  { install.packages("formattable");  require(formattable)    }
?formattable
formattable(bars)
d <- formattable(bars)
d
shiny::runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
pwd
getwd()
d <- read_csv("~/barbeerdrinker/tables/tsns.csv")
d <- read_csv("~/Documents/barbeerdrinker/tables/tsns.csv")
d <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/tsns.csv")
tsns
d
tsns
b <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/bills.csv")
b
b %>% group_by(name, bar, transaction_id) %>% summarise(total = sum(quantity*price))
b %>% group_by(name, bar, transaction_id) %>% summarise(total = sum(quantity*price)) %>% arrange(desc(transaction_id))
b %>% group_by(name, bar, transaction_id) %>% summarise(total = sum(quantity*price)) %>% arrange(transaction_id)
bills
reset_tbls()
bills
b
bills
bills
b
b %>% arrange(transaction_id)
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- bills %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(runif(nrow(tsns), 10, 20))/100
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip$value) %>%
mutate(total = (subtotal + subtotal*tip) + (subtotal + subtotal*tip)*0.07)
tsns$subtotal <- round(tsns$subtotal, 2)
tsns$tip <- round(tsns$tip, 2)
tsns$total <- round(tsns$total, 2)
write_csv(tsns, "~/tsns.csv")
tsns
tsns <- bills %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(runif(nrow(tsns), 10, 20))/100
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip$value) %>%
mutate(total = (subtotal + subtotal*tip) + (subtotal + subtotal*tip)*0.07)
tsns$subtotal <- round(tsns$subtotal, 2)
tsns$tip <- round(tsns$tip, 2)
tsns$total <- round(tsns$total, 2)
write_csv(tsns, "~/tsns.csv")
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip$value) %>%
mutate(total = (subtotal*0.07) + tip)
tip
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(runif(nrow(tsns), 10, 20))/100
tip
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip) %>%
mutate(total = (subtotal*0.07) + tip)
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- bills %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(runif(nrow(tsns), 10, 20))/100
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip) %>%
mutate(total = (subtotal*0.07) + tip)
tsns$subtotal <- round(tsns$subtotal, 2)
tsns$tip <- round(tsns$tip, 2)
tsns$total <- round(tsns$total, 2)
write_csv(tsns, "~/tsns.csv")
tsns
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- bills %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
bills
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- b %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(runif(nrow(tsns), 10, 20))/100
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip) %>%
mutate(total = (subtotal*0.07) + tip)
tsns$subtotal <- round(tsns$subtotal, 2)
tsns$tip <- round(tsns$tip, 2)
tsns$total <- round(tsns$total, 2)
write_csv(tsns, "~/tsns.csv")
b
tsns <- b %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(runif(nrow(tsns), 10, 20))/100
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip) %>%
mutate(total = (subtotal*0.07) + tip)
tip
tbl_df(tip)
tbl_df(runif(nrow(tsns), 10, 20))/100
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(tbl_df(runif(nrow(tsns), 10, 20))/100)
tip
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(tbl_df(runif(nrow(tsns), 10, 20))/100)
tip
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip$value) %>%
mutate(total = (subtotal*0.07) + tip)
tsns$subtotal <- round(tsns$subtotal, 2)
tsns$tip <- round(tsns$tip, 2)
tsns$total <- round(tsns$total, 2)
tsns
write_csv(tsns, "~/tsns.csv")
b
b %>% arrange(transaction_id)
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- b %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip <- tbl_df(tbl_df(runif(nrow(tsns), 10, 20))/100)
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = tip$value) %>%
mutate(total = (subtotal + subtotal*0.07) + tip)
tsns$subtotal <- round(tsns$subtotal, 2)
tsns$tip <- round(tsns$tip, 2)
tsns$total <- round(tsns$total, 2)
write_csv(tsns, "~/tsns.csv")
tsns
# generate a random tip between 10-20% of the subtotal
tip_pct <- tbl_df(tbl_df(runif(nrow(tsns), 10, 20))/100)
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = subtotal * tip_pct$value) %>%
mutate(total = (subtotal + subtotal*0.07) + tip)
tsns
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- b %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip_pct <- tbl_df(tbl_df(runif(nrow(tsns), 10, 20))/100)
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = subtotal * tip_pct$value) %>%
mutate(total = (subtotal + subtotal*0.07) + tip)
tsns$subtotal <- round(tsns$subtotal, 3)
tsns$tip <- round(tsns$tip, 3)
tsns$total <- round(tsns$total, 3)
write_csv(tsns, "~/tsns.csv")
tsns
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- b %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip_pct <- tbl_df(tbl_df(runif(nrow(tsns), 10, 20))/100)
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = subtotal * tip_pct$value) %>%
mutate(total = (subtotal + subtotal*0.07) + tip)
#
# tsns$subtotal <- round(tsns$subtotal, 2)
# tsns$tip <- round(tsns$tip, 2)
# tsns$total <- round(tsns$total, 2)
write_csv(tsns, "~/tsns.csv")
tsns
bills <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/bills.csv")
bills <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/bills.csv")
# reduce bills to single transaction_id (PK), and include name/bar of tsn
# compute subtotal
tsns <- bills %>%
group_by(name, bar, transaction_id) %>%
summarise(subtotal = sum(quantity*price)) %>%
ungroup()
# generate a random tip between 10-20% of the subtotal
tip_pct <- tbl_df(tbl_df(runif(nrow(tsns), 10, 20))/100)
# add tip column and calculate total using 7% sales tax
tsns <- tsns %>%
mutate(tip = subtotal * tip_pct$value) %>%
mutate(total = (subtotal + subtotal*0.07) + tip)
tsns$subtotal <- round(tsns$subtotal, 2)
tsns$tip <- round(tsns$tip, 2)
tsns$total <- round(tsns$total, 2)
write_csv(tsns, "~/tsns.csv")
tsns_times <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/tsns_times.csv")
tsns_times <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/tsns_times.csv")
tsns_times
View(tsns_times)
tsns_times <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/tsns_times.csv")
View(tsns_times)
tsns_times <- read_csv("~/Documents/barbeerdrinker/barbeerdrinker-app/tables/tsns_times.csv")
tsns_times
tsns_times
paste(tsns_times$date, tsns_times$time)
parse_date_time(paste(tsns_times$date, tsns_times$time), 'ymd HMS!')
library(lubridate)
parse_date_time(paste(tsns_times$date, tsns_times$time), 'ymd HMS!')
parse_date_time(paste(tsns_times$date, tsns_times$time), 'ymd HMS')
tsns_times
paste(tsns_times$date, tsns_times$time)
as.POSIXct(paste(tsns_times$date, tsns_times$time), "%m/%d/%Y %H:%M:%S")
warnings()
tsns_times
shiny::runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
?formattable
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
?box
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
ensure_tbls()
left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id")
beer <- beers$name
left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id")
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
ungroup() %>%
arrange(desc(count)) %>%
top_n(n, count)
n <- 10
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
ungroup() %>%
arrange(desc(count)) %>%
top_n(n, count)
tmp
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id")
tmp
left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T)
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
ungroup()
tmp
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
ungroup() %>%
arrange(desc(count))
tmp
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
ungroup()
tmp
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
arrange(desc(count)) %>%
ungroup() %>%
top_n(n, count)
tmp
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
arrange(desc(count)) %>%
#ungroup() %>%
top_n(n, count)
tmp
tmp <- left_join(subset(bills, bills$item %in% tbl_df(beer)[[1]]),
tsns,
by = "transaction_id") %>%
select(bar_name, item, quantity) %>%
group_by(bar_name, item) %>%
mutate(count = sum(quantity)) %>%
group_by(count, add = T) %>%
summarise() %>%
top_n(n, count)
tmp
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
shiny::runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
install.packages("shinydashboard")
shinyWidgetsGallery()
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
runApp('~/Documents/barbeerdrinker/barbeerdrinker-app')
